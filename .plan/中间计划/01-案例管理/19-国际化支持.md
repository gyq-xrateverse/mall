# 19-å›½é™…åŒ–æ”¯æŒ

## ä»»åŠ¡æ¦‚è¿°
ä¸ºæ¡ˆä¾‹ç®¡ç†ç³»ç»Ÿæ·»åŠ å›½é™…åŒ–(i18n)æ”¯æŒï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€è‹±æ–‡ç­‰å¤šè¯­è¨€ç•Œé¢ï¼Œæ”¯æŒåŠ¨æ€è¯­è¨€åˆ‡æ¢å’Œæœ¬åœ°åŒ–æ ¼å¼ã€‚

## å‰ç½®æ¡ä»¶
- å‰ç«¯é¡¹ç›®å·²åŸºæœ¬å®Œæˆ
- UIç»„ä»¶åº“å·²é…ç½®
- ç¡®å®šéœ€è¦æ”¯æŒçš„è¯­è¨€åˆ—è¡¨

## å®æ–½æ­¥éª¤

### 1. åç«¯å›½é™…åŒ–é…ç½®

#### Spring Bootå›½é™…åŒ–é…ç½®
**æ–‡ä»¶è·¯å¾„ï¼š** `mall/mall-admin/src/main/resources/application.yml`

```yaml
spring:
  messages:
    basename: i18n/messages
    encoding: UTF-8
    cache-duration: 3600s
    fallback-to-system-locale: true
```

#### å›½é™…åŒ–é…ç½®ç±»
**æ–‡ä»¶è·¯å¾„ï¼š** `mall/mall-admin/src/main/java/com/macro/mall/config/I18nConfig.java`

```java
package com.macro.mall.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.LocaleResolver;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
import org.springframework.web.servlet.i18n.LocaleChangeInterceptor;
import org.springframework.web.servlet.i18n.SessionLocaleResolver;
import org.springframework.context.support.ReloadableResourceBundleMessageSource;

import java.util.Locale;

@Configuration
public class I18nConfig implements WebMvcConfigurer {
    
    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver resolver = new SessionLocaleResolver();
        resolver.setDefaultLocale(Locale.SIMPLIFIED_CHINESE);
        return resolver;
    }
    
    @Bean
    public LocaleChangeInterceptor localeChangeInterceptor() {
        LocaleChangeInterceptor interceptor = new LocaleChangeInterceptor();
        interceptor.setParamName("lang");
        return interceptor;
    }
    
    @Bean
    public ReloadableResourceBundleMessageSource messageSource() {
        ReloadableResourceBundleMessageSource messageSource = 
                new ReloadableResourceBundleMessageSource();
        messageSource.setBasename("classpath:i18n/messages");
        messageSource.setDefaultEncoding("UTF-8");
        messageSource.setCacheSeconds(300);
        messageSource.setFallbackToSystemLocale(false);
        return messageSource;
    }
    
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(localeChangeInterceptor());
    }
}
```

#### å›½é™…åŒ–å·¥å…·ç±»
**æ–‡ä»¶è·¯å¾„ï¼š** `mall/mall-admin/src/main/java/com/macro/mall/util/I18nUtil.java`

```java
package com.macro.mall.util;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.MessageSource;
import org.springframework.context.i18n.LocaleContextHolder;
import org.springframework.stereotype.Component;

import java.util.Locale;

@Component
public class I18nUtil {
    
    @Autowired
    private MessageSource messageSource;
    
    /**
     * è·å–å›½é™…åŒ–æ¶ˆæ¯
     */
    public String getMessage(String code) {
        return getMessage(code, null);
    }
    
    /**
     * è·å–å›½é™…åŒ–æ¶ˆæ¯ï¼ˆå¸¦å‚æ•°ï¼‰
     */
    public String getMessage(String code, Object[] args) {
        Locale locale = LocaleContextHolder.getLocale();
        return messageSource.getMessage(code, args, code, locale);
    }
    
    /**
     * è·å–æŒ‡å®šè¯­è¨€çš„æ¶ˆæ¯
     */
    public String getMessage(String code, Object[] args, Locale locale) {
        return messageSource.getMessage(code, args, code, locale);
    }
}
```

#### å›½é™…åŒ–èµ„æºæ–‡ä»¶
**æ–‡ä»¶è·¯å¾„ï¼š** `mall/mall-admin/src/main/resources/i18n/messages.properties`

```properties
# é€šç”¨
common.success=æ“ä½œæˆåŠŸ
common.error=æ“ä½œå¤±è´¥
common.confirm=ç¡®è®¤
common.cancel=å–æ¶ˆ
common.save=ä¿å­˜
common.delete=åˆ é™¤
common.edit=ç¼–è¾‘
common.view=æŸ¥çœ‹
common.search=æœç´¢
common.reset=é‡ç½®
common.add=æ·»åŠ 
common.back=è¿”å›
common.submit=æäº¤
common.loading=åŠ è½½ä¸­...
common.no.data=æš‚æ— æ•°æ®

# æ¡ˆä¾‹ç®¡ç†
case.title=æ¡ˆä¾‹ç®¡ç†
case.category=æ¡ˆä¾‹åˆ†ç±»
case.data=æ¡ˆä¾‹æ•°æ®
case.category.name=åˆ†ç±»åç§°
case.category.description=åˆ†ç±»æè¿°
case.category.icon=åˆ†ç±»å›¾æ ‡
case.category.sort=æ’åº
case.category.status=çŠ¶æ€
case.category.show.status=æ˜¾ç¤ºçŠ¶æ€
case.category.create.time=åˆ›å»ºæ—¶é—´
case.category.create.success=åˆ†ç±»åˆ›å»ºæˆåŠŸ
case.category.update.success=åˆ†ç±»æ›´æ–°æˆåŠŸ
case.category.delete.success=åˆ†ç±»åˆ é™¤æˆåŠŸ
case.category.delete.confirm=ç¡®è®¤åˆ é™¤è¯¥åˆ†ç±»ï¼Ÿ

case.data.title=æ ‡é¢˜
case.data.content=å†…å®¹
case.data.cover.image=å°é¢å›¾ç‰‡
case.data.images=æ¡ˆä¾‹å›¾ç‰‡
case.data.tags=æ ‡ç­¾
case.data.view.count=æµè§ˆæ•°
case.data.like.count=ç‚¹èµæ•°
case.data.hot.score=çƒ­åº¦åˆ†æ•°
case.data.create.success=æ¡ˆä¾‹åˆ›å»ºæˆåŠŸ
case.data.update.success=æ¡ˆä¾‹æ›´æ–°æˆåŠŸ
case.data.delete.success=æ¡ˆä¾‹åˆ é™¤æˆåŠŸ
case.data.delete.confirm=ç¡®è®¤åˆ é™¤è¯¥æ¡ˆä¾‹ï¼Ÿ

# çŠ¶æ€
status.enable=å¯ç”¨
status.disable=ç¦ç”¨
status.show=æ˜¾ç¤º
status.hide=éšè—

# éªŒè¯æ¶ˆæ¯
validation.required={0}ä¸èƒ½ä¸ºç©º
validation.length.max={0}é•¿åº¦ä¸èƒ½è¶…è¿‡{1}ä¸ªå­—ç¬¦
validation.length.min={0}é•¿åº¦ä¸èƒ½å°‘äº{1}ä¸ªå­—ç¬¦
validation.email.format=é‚®ç®±æ ¼å¼ä¸æ­£ç¡®
validation.phone.format=æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®
validation.url.format=URLæ ¼å¼ä¸æ­£ç¡®

# é”™è¯¯æ¶ˆæ¯
error.system=ç³»ç»Ÿé”™è¯¯
error.network=ç½‘ç»œé”™è¯¯
error.timeout=è¯·æ±‚è¶…æ—¶
error.unauthorized=æœªæˆæƒè®¿é—®
error.forbidden=è®¿é—®è¢«æ‹’ç»
error.not.found=èµ„æºä¸å­˜åœ¨
error.file.upload=æ–‡ä»¶ä¸Šä¼ å¤±è´¥
error.file.type=æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ
error.file.size=æ–‡ä»¶å¤§å°è¶…å‡ºé™åˆ¶
```

**æ–‡ä»¶è·¯å¾„ï¼š** `mall/mall-admin/src/main/resources/i18n/messages_en.properties`

```properties
# Common
common.success=Operation successful
common.error=Operation failed
common.confirm=Confirm
common.cancel=Cancel
common.save=Save
common.delete=Delete
common.edit=Edit
common.view=View
common.search=Search
common.reset=Reset
common.add=Add
common.back=Back
common.submit=Submit
common.loading=Loading...
common.no.data=No data

# Case Management
case.title=Case Management
case.category=Case Category
case.data=Case Data
case.category.name=Category Name
case.category.description=Description
case.category.icon=Icon
case.category.sort=Sort
case.category.status=Status
case.category.show.status=Show Status
case.category.create.time=Create Time
case.category.create.success=Category created successfully
case.category.update.success=Category updated successfully
case.category.delete.success=Category deleted successfully
case.category.delete.confirm=Confirm delete this category?

case.data.title=Title
case.data.content=Content
case.data.cover.image=Cover Image
case.data.images=Images
case.data.tags=Tags
case.data.view.count=Views
case.data.like.count=Likes
case.data.hot.score=Hot Score
case.data.create.success=Case created successfully
case.data.update.success=Case updated successfully
case.data.delete.success=Case deleted successfully
case.data.delete.confirm=Confirm delete this case?

# Status
status.enable=Enable
status.disable=Disable
status.show=Show
status.hide=Hide

# Validation
validation.required={0} is required
validation.length.max={0} cannot exceed {1} characters
validation.length.min={0} must be at least {1} characters
validation.email.format=Invalid email format
validation.phone.format=Invalid phone format
validation.url.format=Invalid URL format

# Errors
error.system=System error
error.network=Network error
error.timeout=Request timeout
error.unauthorized=Unauthorized access
error.forbidden=Access denied
error.not.found=Resource not found
error.file.upload=File upload failed
error.file.type=Unsupported file type
error.file.size=File size exceeds limit
```

### 2. å‰ç«¯å›½é™…åŒ–é…ç½®ï¼ˆVue.jsï¼‰

#### Vue i18né…ç½®
**æ–‡ä»¶è·¯å¾„ï¼š** `mall-admin-web/src/i18n/index.js`

```javascript
import Vue from 'vue'
import VueI18n from 'vue-i18n'
import Cookies from 'js-cookie'
import elementEnLocale from 'element-ui/lib/locale/lang/en'
import elementZhLocale from 'element-ui/lib/locale/lang/zh-CN'
import enLocale from './lang/en'
import zhLocale from './lang/zh-CN'

Vue.use(VueI18n)

const messages = {
  en: {
    ...enLocale,
    ...elementEnLocale
  },
  'zh-CN': {
    ...zhLocale,
    ...elementZhLocale
  }
}

export function getLanguage() {
  const chooseLanguage = Cookies.get('language')
  if (chooseLanguage) return chooseLanguage

  // å¦‚æœæ²¡æœ‰é€‰æ‹©è¯­è¨€ï¼Œåˆ™ä»æµè§ˆå™¨è·å–
  const language = (navigator.language || navigator.browserLanguage).toLowerCase()
  const locales = Object.keys(messages)
  for (const locale of locales) {
    if (language.indexOf(locale) > -1) {
      return locale
    }
  }
  return 'zh-CN'
}

const i18n = new VueI18n({
  locale: getLanguage(),
  messages,
  fallbackLocale: 'zh-CN',
  silentTranslationWarn: true
})

export default i18n
```

#### ä¸­æ–‡è¯­è¨€åŒ…
**æ–‡ä»¶è·¯å¾„ï¼š** `mall-admin-web/src/i18n/lang/zh-CN.js`

```javascript
export default {
  // å¯¼èˆªèœå•
  route: {
    dashboard: 'é¦–é¡µ',
    case: 'æ¡ˆä¾‹ç®¡ç†',
    caseCategory: 'æ¡ˆä¾‹åˆ†ç±»',
    caseData: 'æ¡ˆä¾‹æ•°æ®',
    addCaseCategory: 'æ·»åŠ æ¡ˆä¾‹åˆ†ç±»',
    updateCaseCategory: 'ä¿®æ”¹æ¡ˆä¾‹åˆ†ç±»',
    addCaseData: 'æ·»åŠ æ¡ˆä¾‹',
    updateCaseData: 'ä¿®æ”¹æ¡ˆä¾‹'
  },

  // é€šç”¨
  common: {
    success: 'æ“ä½œæˆåŠŸ',
    error: 'æ“ä½œå¤±è´¥',
    confirm: 'ç¡®è®¤',
    cancel: 'å–æ¶ˆ',
    save: 'ä¿å­˜',
    delete: 'åˆ é™¤',
    edit: 'ç¼–è¾‘',
    view: 'æŸ¥çœ‹',
    search: 'æœç´¢',
    reset: 'é‡ç½®',
    add: 'æ·»åŠ ',
    back: 'è¿”å›',
    submit: 'æäº¤',
    loading: 'åŠ è½½ä¸­...',
    noData: 'æš‚æ— æ•°æ®',
    total: 'å…±',
    items: 'é¡¹',
    selectAll: 'å…¨é€‰',
    batchDelete: 'æ‰¹é‡åˆ é™¤',
    operation: 'æ“ä½œ',
    createTime: 'åˆ›å»ºæ—¶é—´',
    updateTime: 'æ›´æ–°æ—¶é—´'
  },

  // æŒ‰é’®
  button: {
    add: 'æ–°å¢',
    edit: 'ç¼–è¾‘',
    delete: 'åˆ é™¤',
    search: 'æœç´¢',
    reset: 'é‡ç½®',
    save: 'ä¿å­˜',
    cancel: 'å–æ¶ˆ',
    confirm: 'ç¡®å®š',
    view: 'æŸ¥çœ‹',
    upload: 'ä¸Šä¼ ',
    download: 'ä¸‹è½½',
    export: 'å¯¼å‡º',
    import: 'å¯¼å…¥'
  },

  // æ¡ˆä¾‹ç®¡ç†
  case: {
    title: 'æ¡ˆä¾‹ç®¡ç†',
    category: {
      title: 'æ¡ˆä¾‹åˆ†ç±»',
      name: 'åˆ†ç±»åç§°',
      description: 'åˆ†ç±»æè¿°',
      icon: 'åˆ†ç±»å›¾æ ‡',
      sort: 'æ’åº',
      status: 'çŠ¶æ€',
      showStatus: 'æ˜¾ç¤ºçŠ¶æ€',
      createSuccess: 'åˆ†ç±»åˆ›å»ºæˆåŠŸ',
      updateSuccess: 'åˆ†ç±»æ›´æ–°æˆåŠŸ',
      deleteSuccess: 'åˆ†ç±»åˆ é™¤æˆåŠŸ',
      deleteConfirm: 'ç¡®è®¤åˆ é™¤è¯¥åˆ†ç±»ï¼Ÿ',
      rules: {
        name: 'è¯·è¾“å…¥åˆ†ç±»åç§°',
        nameLength: 'åˆ†ç±»åç§°é•¿åº¦åº”åœ¨1-50ä¸ªå­—ç¬¦',
        description: 'è¯·è¾“å…¥åˆ†ç±»æè¿°',
        icon: 'è¯·è¾“å…¥åˆ†ç±»å›¾æ ‡',
        sort: 'è¯·è¾“å…¥æ’åºå€¼'
      }
    },
    data: {
      title: 'æ¡ˆä¾‹æ•°æ®',
      caseTitle: 'æ ‡é¢˜',
      content: 'å†…å®¹',
      categoryId: 'æ‰€å±åˆ†ç±»',
      coverImage: 'å°é¢å›¾ç‰‡',
      images: 'æ¡ˆä¾‹å›¾ç‰‡',
      tags: 'æ ‡ç­¾',
      viewCount: 'æµè§ˆæ•°',
      likeCount: 'ç‚¹èµæ•°',
      hotScore: 'çƒ­åº¦åˆ†æ•°',
      createSuccess: 'æ¡ˆä¾‹åˆ›å»ºæˆåŠŸ',
      updateSuccess: 'æ¡ˆä¾‹æ›´æ–°æˆåŠŸ',
      deleteSuccess: 'æ¡ˆä¾‹åˆ é™¤æˆåŠŸ',
      deleteConfirm: 'ç¡®è®¤åˆ é™¤è¯¥æ¡ˆä¾‹ï¼Ÿ',
      uploadCover: 'ä¸Šä¼ å°é¢',
      uploadImages: 'ä¸Šä¼ å›¾ç‰‡',
      addTag: 'æ·»åŠ æ ‡ç­¾',
      rules: {
        title: 'è¯·è¾“å…¥æ¡ˆä¾‹æ ‡é¢˜',
        titleLength: 'æ ‡é¢˜é•¿åº¦åº”åœ¨1-100ä¸ªå­—ç¬¦',
        categoryId: 'è¯·é€‰æ‹©æ¡ˆä¾‹åˆ†ç±»',
        coverImage: 'è¯·ä¸Šä¼ å°é¢å›¾ç‰‡',
        content: 'è¯·è¾“å…¥æ¡ˆä¾‹å†…å®¹'
      }
    }
  },

  // çŠ¶æ€
  status: {
    enable: 'å¯ç”¨',
    disable: 'ç¦ç”¨',
    show: 'æ˜¾ç¤º',
    hide: 'éšè—'
  },

  // éªŒè¯
  validation: {
    required: 'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹',
    email: 'è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€',
    phone: 'è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ',
    url: 'è¯·è¾“å…¥æ­£ç¡®çš„URLåœ°å€',
    number: 'è¯·è¾“å…¥æ•°å­—',
    integer: 'è¯·è¾“å…¥æ•´æ•°',
    min: 'æœ€å°å€¼ä¸º{min}',
    max: 'æœ€å¤§å€¼ä¸º{max}',
    minLength: 'æœ€å°‘è¾“å…¥{min}ä¸ªå­—ç¬¦',
    maxLength: 'æœ€å¤šè¾“å…¥{max}ä¸ªå­—ç¬¦'
  },

  // æ–‡ä»¶ä¸Šä¼ 
  upload: {
    selectFile: 'é€‰æ‹©æ–‡ä»¶',
    dragOrClick: 'å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»ä¸Šä¼ ',
    uploading: 'ä¸Šä¼ ä¸­...',
    success: 'ä¸Šä¼ æˆåŠŸ',
    failed: 'ä¸Šä¼ å¤±è´¥',
    retry: 'é‡æ–°ä¸Šä¼ ',
    delete: 'åˆ é™¤',
    preview: 'é¢„è§ˆ',
    sizeLimit: 'æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡{size}',
    typeLimit: 'åªèƒ½ä¸Šä¼ {types}æ ¼å¼çš„æ–‡ä»¶'
  },

  // åˆ†é¡µ
  pagination: {
    total: 'å…± {total} æ¡è®°å½•',
    page: 'ç¬¬ {page} é¡µ',
    goto: 'å‰å¾€',
    pageSize: 'æ¯é¡µæ˜¾ç¤º',
    items: 'æ¡'
  }
}
```

#### è‹±æ–‡è¯­è¨€åŒ…
**æ–‡ä»¶è·¯å¾„ï¼š** `mall-admin-web/src/i18n/lang/en.js`

```javascript
export default {
  // Navigation
  route: {
    dashboard: 'Dashboard',
    case: 'Case Management',
    caseCategory: 'Case Category',
    caseData: 'Case Data',
    addCaseCategory: 'Add Category',
    updateCaseCategory: 'Update Category',
    addCaseData: 'Add Case',
    updateCaseData: 'Update Case'
  },

  // Common
  common: {
    success: 'Operation successful',
    error: 'Operation failed',
    confirm: 'Confirm',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    view: 'View',
    search: 'Search',
    reset: 'Reset',
    add: 'Add',
    back: 'Back',
    submit: 'Submit',
    loading: 'Loading...',
    noData: 'No data',
    total: 'Total',
    items: 'items',
    selectAll: 'Select all',
    batchDelete: 'Batch delete',
    operation: 'Operation',
    createTime: 'Create Time',
    updateTime: 'Update Time'
  },

  // Buttons
  button: {
    add: 'Add',
    edit: 'Edit',
    delete: 'Delete',
    search: 'Search',
    reset: 'Reset',
    save: 'Save',
    cancel: 'Cancel',
    confirm: 'Confirm',
    view: 'View',
    upload: 'Upload',
    download: 'Download',
    export: 'Export',
    import: 'Import'
  },

  // Case Management
  case: {
    title: 'Case Management',
    category: {
      title: 'Case Category',
      name: 'Name',
      description: 'Description',
      icon: 'Icon',
      sort: 'Sort',
      status: 'Status',
      showStatus: 'Show Status',
      createSuccess: 'Category created successfully',
      updateSuccess: 'Category updated successfully',
      deleteSuccess: 'Category deleted successfully',
      deleteConfirm: 'Confirm delete this category?',
      rules: {
        name: 'Please enter category name',
        nameLength: 'Name length should be 1-50 characters',
        description: 'Please enter description',
        icon: 'Please enter icon',
        sort: 'Please enter sort value'
      }
    },
    data: {
      title: 'Case Data',
      caseTitle: 'Title',
      content: 'Content',
      categoryId: 'Category',
      coverImage: 'Cover Image',
      images: 'Images',
      tags: 'Tags',
      viewCount: 'Views',
      likeCount: 'Likes',
      hotScore: 'Hot Score',
      createSuccess: 'Case created successfully',
      updateSuccess: 'Case updated successfully',
      deleteSuccess: 'Case deleted successfully',
      deleteConfirm: 'Confirm delete this case?',
      uploadCover: 'Upload Cover',
      uploadImages: 'Upload Images',
      addTag: 'Add Tag',
      rules: {
        title: 'Please enter case title',
        titleLength: 'Title length should be 1-100 characters',
        categoryId: 'Please select category',
        coverImage: 'Please upload cover image',
        content: 'Please enter case content'
      }
    }
  },

  // Status
  status: {
    enable: 'Enable',
    disable: 'Disable',
    show: 'Show',
    hide: 'Hide'
  },

  // Validation
  validation: {
    required: 'This field is required',
    email: 'Please enter a valid email address',
    phone: 'Please enter a valid phone number',
    url: 'Please enter a valid URL',
    number: 'Please enter a number',
    integer: 'Please enter an integer',
    min: 'Minimum value is {min}',
    max: 'Maximum value is {max}',
    minLength: 'Minimum length is {min} characters',
    maxLength: 'Maximum length is {max} characters'
  },

  // File Upload
  upload: {
    selectFile: 'Select File',
    dragOrClick: 'Drag files here, or click to upload',
    uploading: 'Uploading...',
    success: 'Upload successful',
    failed: 'Upload failed',
    retry: 'Retry',
    delete: 'Delete',
    preview: 'Preview',
    sizeLimit: 'File size cannot exceed {size}',
    typeLimit: 'Only {types} files are supported'
  },

  // Pagination
  pagination: {
    total: 'Total {total} records',
    page: 'Page {page}',
    goto: 'Go to',
    pageSize: 'Records per page',
    items: 'items'
  }
}
```

### 3. Reactå›½é™…åŒ–é…ç½®

#### React i18né…ç½®
**æ–‡ä»¶è·¯å¾„ï¼š** `beilv-agent-web/src/i18n/index.js`

```javascript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import Backend from 'i18next-http-backend';
import LanguageDetector from 'i18next-browser-languagedetector';

// å¯¼å…¥è¯­è¨€åŒ…
import zh from './locales/zh.json';
import en from './locales/en.json';

const resources = {
  zh: { translation: zh },
  en: { translation: en }
};

i18n
  .use(Backend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'zh',
    debug: process.env.NODE_ENV === 'development',
    
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      lookupLocalStorage: 'language',
      caches: ['localStorage']
    },
    
    interpolation: {
      escapeValue: false
    },
    
    react: {
      useSuspense: false
    }
  });

export default i18n;
```

#### è¯­è¨€åˆ‡æ¢ç»„ä»¶
**æ–‡ä»¶è·¯å¾„ï¼š** `beilv-agent-web/src/components/Common/LanguageSwitch.jsx`

```jsx
import React from 'react';
import { useTranslation } from 'react-i18next';
import './LanguageSwitch.scss';

const LanguageSwitch = ({ className = '' }) => {
  const { i18n, t } = useTranslation();

  const languages = [
    { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
    { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' }
  ];

  const currentLanguage = languages.find(lang => lang.code === i18n.language) || languages[0];

  const handleLanguageChange = (languageCode) => {
    i18n.changeLanguage(languageCode);
    localStorage.setItem('language', languageCode);
    
    // é€šçŸ¥å…¶ä»–ç»„ä»¶è¯­è¨€å·²æ”¹å˜
    window.dispatchEvent(new CustomEvent('languageChanged', {
      detail: { language: languageCode }
    }));
  };

  return (
    <div className={`language-switch ${className}`}>
      <div className="language-dropdown">
        <button className="language-trigger">
          <span className="flag">{currentLanguage.flag}</span>
          <span className="name">{currentLanguage.name}</span>
          <span className="arrow">â–¼</span>
        </button>
        
        <div className="language-options">
          {languages.map(language => (
            <button
              key={language.code}
              className={`language-option ${i18n.language === language.code ? 'active' : ''}`}
              onClick={() => handleLanguageChange(language.code)}
            >
              <span className="flag">{language.flag}</span>
              <span className="name">{language.name}</span>
            </button>
          ))}
        </div>
      </div>
    </div>
  );
};

export default LanguageSwitch;
```

#### æ—¥æœŸæ ¼å¼åŒ–å·¥å…·
**æ–‡ä»¶è·¯å¾„ï¼š** `beilv-agent-web/src/utils/dateFormat.js`

```javascript
import { format } from 'date-fns';
import { zhCN, enUS } from 'date-fns/locale';

const locales = {
  zh: zhCN,
  en: enUS
};

export const formatDate = (date, formatStr = 'yyyy-MM-dd', locale = 'zh') => {
  if (!date) return '';
  
  const dateObj = typeof date === 'string' ? new Date(date) : date;
  const localeObj = locales[locale] || locales.zh;
  
  try {
    return format(dateObj, formatStr, { locale: localeObj });
  } catch (error) {
    console.warn('Date format error:', error);
    return dateObj.toLocaleDateString();
  }
};

export const formatDateTime = (date, locale = 'zh') => {
  return formatDate(date, 'yyyy-MM-dd HH:mm:ss', locale);
};

export const formatRelativeTime = (date, locale = 'zh') => {
  if (!date) return '';
  
  const now = new Date();
  const target = typeof date === 'string' ? new Date(date) : date;
  const diffMs = now - target;
  const diffMinutes = Math.floor(diffMs / 60000);
  const diffHours = Math.floor(diffMs / 3600000);
  const diffDays = Math.floor(diffMs / 86400000);
  
  const messages = {
    zh: {
      justNow: 'åˆšåˆš',
      minutesAgo: '{count}åˆ†é’Ÿå‰',
      hoursAgo: '{count}å°æ—¶å‰',
      daysAgo: '{count}å¤©å‰',
      longAgo: 'å¾ˆä¹…ä¹‹å‰'
    },
    en: {
      justNow: 'Just now',
      minutesAgo: '{count} minutes ago',
      hoursAgo: '{count} hours ago',
      daysAgo: '{count} days ago',
      longAgo: 'Long time ago'
    }
  };
  
  const msg = messages[locale] || messages.zh;
  
  if (diffMinutes < 1) return msg.justNow;
  if (diffMinutes < 60) return msg.minutesAgo.replace('{count}', diffMinutes);
  if (diffHours < 24) return msg.hoursAgo.replace('{count}', diffHours);
  if (diffDays < 30) return msg.daysAgo.replace('{count}', diffDays);
  
  return formatDate(date, 'yyyy-MM-dd', locale);
};

export const getLocalizedMonthNames = (locale = 'zh') => {
  const months = [];
  for (let i = 0; i < 12; i++) {
    const date = new Date(2023, i, 1);
    months.push(formatDate(date, 'MMMM', locale));
  }
  return months;
};

export const getLocalizedWeekdays = (locale = 'zh') => {
  const weekdays = [];
  // ä»å‘¨ä¸€å¼€å§‹
  for (let i = 1; i <= 7; i++) {
    const date = new Date(2023, 0, i + 1); // 2023å¹´1æœˆ2æ—¥æ˜¯å‘¨ä¸€
    weekdays.push(formatDate(date, 'EEEE', locale));
  }
  return weekdays;
};
```

### 4. æ•°å­—å’Œè´§å¸æ ¼å¼åŒ–

#### æ ¼å¼åŒ–å·¥å…·
**æ–‡ä»¶è·¯å¾„ï¼š** `beilv-agent-web/src/utils/numberFormat.js`

```javascript
export const formatNumber = (number, locale = 'zh-CN', options = {}) => {
  if (number === null || number === undefined) return '';
  
  try {
    return new Intl.NumberFormat(locale, {
      maximumFractionDigits: 2,
      ...options
    }).format(number);
  } catch (error) {
    console.warn('Number format error:', error);
    return number.toString();
  }
};

export const formatCurrency = (amount, currency = 'CNY', locale = 'zh-CN') => {
  return formatNumber(amount, locale, {
    style: 'currency',
    currency: currency
  });
};

export const formatPercent = (value, locale = 'zh-CN') => {
  return formatNumber(value / 100, locale, {
    style: 'percent',
    maximumFractionDigits: 1
  });
};

export const formatCompactNumber = (number, locale = 'zh-CN') => {
  const formatMap = {
    'zh-CN': [
      { threshold: 1e8, suffix: 'äº¿', divisor: 1e8 },
      { threshold: 1e4, suffix: 'ä¸‡', divisor: 1e4 }
    ],
    'en-US': [
      { threshold: 1e9, suffix: 'B', divisor: 1e9 },
      { threshold: 1e6, suffix: 'M', divisor: 1e6 },
      { threshold: 1e3, suffix: 'K', divisor: 1e3 }
    ]
  };

  const formats = formatMap[locale] || formatMap['en-US'];
  
  for (const format of formats) {
    if (Math.abs(number) >= format.threshold) {
      const formatted = (number / format.divisor).toFixed(1);
      return formatted + format.suffix;
    }
  }
  
  return formatNumber(number, locale);
};
```

### 5. å›½é™…åŒ–Hookå’Œç»„ä»¶

#### Reactå›½é™…åŒ–Hook
**æ–‡ä»¶è·¯å¾„ï¼š** `beilv-agent-web/src/hooks/useI18n.js`

```javascript
import { useTranslation } from 'react-i18next';
import { formatDate, formatDateTime, formatRelativeTime } from '../utils/dateFormat';
import { formatNumber, formatCurrency, formatPercent } from '../utils/numberFormat';

export const useI18n = () => {
  const { t, i18n } = useTranslation();
  
  const currentLanguage = i18n.language;
  const isZh = currentLanguage.startsWith('zh');
  
  const tf = {
    // æ—¥æœŸæ ¼å¼åŒ–
    date: (date, format) => formatDate(date, format, currentLanguage),
    dateTime: (date) => formatDateTime(date, currentLanguage),
    relativeTime: (date) => formatRelativeTime(date, currentLanguage),
    
    // æ•°å­—æ ¼å¼åŒ–
    number: (number, options) => formatNumber(number, currentLanguage, options),
    currency: (amount, currency) => formatCurrency(amount, currency, currentLanguage),
    percent: (value) => formatPercent(value, currentLanguage),
    
    // å¤æ•°å¤„ç†
    plural: (count, key, options = {}) => {
      return t(key, { count, ...options });
    },
    
    // æ¡ä»¶ç¿»è¯‘
    conditional: (condition, trueKey, falseKey, options = {}) => {
      return t(condition ? trueKey : falseKey, options);
    }
  };
  
  return {
    t,
    tf,
    i18n,
    currentLanguage,
    isZh,
    changeLanguage: i18n.changeLanguage
  };
};

export default useI18n;
```

## éªŒè¯æ­¥éª¤
1. æµ‹è¯•å¤šè¯­è¨€ç•Œé¢åˆ‡æ¢åŠŸèƒ½
2. éªŒè¯æ—¥æœŸæ—¶é—´æœ¬åœ°åŒ–æ ¼å¼
3. æ£€æŸ¥æ•°å­—å’Œè´§å¸æ ¼å¼åŒ–
4. æµ‹è¯•è¡¨å•éªŒè¯æ¶ˆæ¯å›½é™…åŒ–
5. éªŒè¯é”™è¯¯æç¤ºå¤šè¯­è¨€æ”¯æŒ

## è¾“å‡ºç‰©
- åç«¯å›½é™…åŒ–é…ç½®å’Œèµ„æºæ–‡ä»¶
- å‰ç«¯å¤šè¯­è¨€æ”¯æŒç»„ä»¶
- æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å·¥å…·
- æ•°å­—è´§å¸æ ¼å¼åŒ–å·¥å…·
- è¯­è¨€åˆ‡æ¢ç»„ä»¶

## æ³¨æ„äº‹é¡¹
1. ç¡®ä¿æ‰€æœ‰æ–‡æœ¬éƒ½å·²å›½é™…åŒ–
2. æ³¨æ„ä¸åŒè¯­è¨€çš„æ–‡æœ¬é•¿åº¦å·®å¼‚
3. è€ƒè™‘RTLè¯­è¨€çš„å¸ƒå±€é€‚é…
4. ä¿æŒç¿»è¯‘çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§

## åç»­ä»»åŠ¡
- ä¸‹ä¸€æ­¥ï¼š20-éƒ¨ç½²å’Œè¿ç»´è‡ªåŠ¨åŒ–.md