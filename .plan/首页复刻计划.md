# 首页复刻计划 - 完全匹配 prototype.html

## 项目概述
完全复刻 `/mnt/d/software/beilv-agent/web-ui/prototype.html` 的视觉效果、交互行为和功能实现。

## 技术栈
- React 18 + TypeScript
- CSS-in-JS (内联样式)
- 现有Redux状态管理
- 现有路由系统

## 详细实施计划

### 阶段1：基础架构搭建 (1小时)

#### 1.1 清空并重建Home.tsx
- [ ] 完全清空现有Home.tsx内容
- [ ] 设置基础React组件结构
- [ ] 导入必要的依赖包
- [ ] 建立状态管理架构

#### 1.2 整体页面结构
```tsx
// 基础结构
<div className="app-container">
  <Header />
  <main className="main-layout">
    <Sidebar />
    <Content />
  </main>
  <FloatingSearchBar />
</div>
```

### 阶段2：左侧边栏实现 (30分钟)

#### 2.1 侧边栏容器
- **尺寸**: 60px宽度, 100vh高度
- **背景**: white
- **边框**: 右边框 1px solid #e1e5e9
- **布局**: flex-direction: column, align-items: center
- **内边距**: 20px 0
- **定位**: position: fixed, left: 0, top: 0

#### 2.2 图标设计
- **数量**: 4个图标
- **尺寸**: 24px × 24px
- **间距**: gap: 30px
- **样式**: 
  - 第1个图标: 背景 #ff6b35 (激活状态)
  - 其他图标: 背景 #666, 透明度 0.6
- **圆角**: 4px
- **交互**: cursor: pointer, 悬浮效果

#### 2.3 响应式适配
- **≤768px**: 变为顶部横向布局 (高度60px)
- **≤480px**: 图标尺寸调整为20px

### 阶段3：顶部导航栏实现 (45分钟)

#### 3.1 导航栏容器
- **背景**: #1a1a1a
- **文字色**: white
- **高度**: 60px
- **内边距**: 12px 20px
- **布局**: flex, justify-content: space-between
- **定位**: position: fixed, top: 0, left: 60px, right: 0
- **层级**: z-index: 1000

#### 3.2 Logo区域
- **字体**: 20px, bold
- **前置圆点**: color: #ff6b35, margin-right: 8px
- **文字**: "BEILV AI"

#### 3.3 右侧功能区
- **布局**: flex, gap: 15px, align-items: center
- **字体**: 14px

#### 3.4 语言下拉菜单
- **按钮**: background: none, border: none
- **悬浮**: opacity: 0.8
- **下拉框**: 目前仅为样式展示，暂无实际菜单内容

#### 3.5 搜索和好友图标
- **尺寸**: 18×18px图标
- **按钮**: padding: 8px, 圆角: 6px
- **悬浮**: background: rgba(255,255,255,0.1)

#### 3.6 升级/积分按钮下拉菜单
- **按钮背景**: #374151
- **圆角**: 20px
- **内边距**: 6px 12px
- **悬浮**: background: #4b5563
- **内容**: "升级 ⚡200"
- **下拉菜单内容**:
  - 头部: "Free"计划 + 升级按钮
  - 积分项目1: ✨ 积分 (永久积分: 0)
  - 积分项目2: 📅 每日免费积分 (每天重置为200: 200)
  - 底部: "Usage details >"链接
- **样式**: 白色背景, 12px圆角, 阴影: 0 8px 32px rgba(0,0,0,0.15)

#### 3.7 用户头像下拉菜单
- **头像**: 32×32px圆形, 背景: #8B5CF6, 内容: "YQ"
- **下拉菜单内容**:
  - 用户信息头部: 大头像 + "YQ G" + "gaoyongqiang@proto..." + 升级按钮
  - 积分显示: "Credits 200 >"
  - 菜单项目:
    1. 管理账户 (用户图标)
    2. 使用指南 (对勾图标)  
    3. Discord (聊天图标)
    4. 退出登录 (退出图标)
- **样式**: 白色背景, 12px圆角, 阴影: 0 8px 32px rgba(0,0,0,0.15)

### 阶段4：主内容区域布局 (30分钟)

#### 4.1 内容容器
- **布局**: margin-left: 60px, margin-top: 60px
- **内边距**: 40px
- **最小高度**: calc(100vh - 60px)

#### 4.2 响应式调整
- **≤768px**: 内边距调整为 20px
- **≤480px**: margin-left: 0, margin-top: 120px

### 阶段5：搜索功能实现 (1小时)

#### 5.1 Hero区域
- **标题**: "今天我们做些什么？"
- **字体**: 32px, margin-bottom: 20px
- **颜色**: #333
- **对齐**: text-align: center

#### 5.2 搜索框容器
- **最大宽度**: 600px
- **居中**: margin: 0 auto 30px
- **背景**: white
- **边框**: 2px solid #e1e5e9
- **圆角**: 25px
- **内边距**: 8px
- **最小高度**: 56px
- **焦点状态**: 边框色 #ff6b35

#### 5.3 文件上传按钮
- **尺寸**: 40×40px圆形
- **背景**: #f8f9fa
- **悬浮**: background: #ff6b35, color: white
- **图标**: 文档图标 20×20px

#### 5.4 输入框
- **类型**: textarea
- **字体**: 16px
- **内边距**: 8px 0
- **最小高度**: 24px
- **最大高度**: 200px
- **行高**: 1.4
- **功能**: 自动调整高度
- **占位符**: "告诉我们你的想法..."

#### 5.5 提交按钮
- **尺寸**: 40×40px圆形
- **旋转**: transform: rotate(-90deg)
- **默认**: background: #f8f9fa, color: #ccc
- **激活**: background: #ff6b35, color: white
- **图标**: 发送箭头 20×20px

#### 5.6 文件预览功能
- **布局**: flex, gap: 8px, flex-wrap: wrap
- **预览项**: 40×40px, 圆角: 8px
- **删除按钮**: 18×18px, 位置: top: -6px, right: -6px
- **限制**: 最多4个文件

#### 5.7 键盘事件
- **Enter**: 提交 (不包含Shift+Enter)
- **自动调整**: textarea高度实时调整

### 阶段6：最近项目区域 (45分钟)

#### 6.1 区域标题
- **文字**: "最近项目"
- **字体**: 18px, color: #666
- **边距**: margin: 40px 0 20px 0

#### 6.2 项目容器
- **布局**: flex, gap: 20px
- **滚动**: overflow-x: auto
- **内边距**: padding: 10px 0 20px 0
- **滚动行为**: scroll-behavior: smooth

#### 6.3 创建新项目卡片
- **尺寸**: 200×200px
- **背景**: #fafafa
- **边框**: 2px dashed #ddd
- **圆角**: 12px
- **内边距**: 20px
- **布局**: flex-direction: column, align-items: center, justify-content: center
- **悬浮**: transform: translateY(-3px), 阴影: 0 8px 24px rgba(0,0,0,0.15)

#### 6.4 新项目图标
- **尺寸**: 60×60px
- **背景**: #ff6b35
- **圆角**: 8px
- **内容**: "+"字符, 24px, white, bold
- **边距**: margin-bottom: 15px

#### 6.5 项目卡片
- **尺寸**: 200×200px
- **背景**: white
- **圆角**: 12px
- **阴影**: 0 2px 8px rgba(0,0,0,0.1)
- **悬浮**: transform: translateY(-3px), 阴影: 0 8px 24px rgba(0,0,0,0.15)

#### 6.6 项目图片区
- **尺寸**: 200×140px
- **背景**: #f0f0f0 (无图片时)
- **占位符**: 📄 48px
- **图片**: object-fit: cover

#### 6.7 项目信息区
- **内边距**: 15px
- **高度**: 60px
- **布局**: flex-direction: column, justify-content: center
- **标题**: 14px, 600字重, color: #333
- **描述**: 12px, color: #999

#### 6.8 查看全部按钮
- **背景**: transparent
- **边框**: 2px solid #ff6b35
- **颜色**: #ff6b35
- **内边距**: 12px 24px
- **圆角**: 25px
- **字体**: 14px, 500字重
- **悬浮**: background: #ff6b35, color: white
- **功能**: 打开项目弹窗 (不是页面跳转！)

### 阶段7：案例展示区域 (1小时)

#### 7.1 区域标题
- **文字**: "案例展示"
- **字体**: 18px, color: #666
- **边距**: margin-bottom: 20px

#### 7.2 分类标签
- **容器**: flex, gap: 15px, flex-wrap: wrap
- **标签**: 
  - 内边距: 10px 20px
  - 背景: white (默认), #ff6b35 (激活)
  - 边框: 1px solid #e1e5e9
  - 圆角: 25px
  - 字体: 14px
  - 颜色: #333 (默认), white (激活)
- **悬浮**: border-color: #ff6b35 (非激活状态)

#### 7.3 瀑布流布局
- **CSS属性**: 
  ```css
  columns: 4;
  column-gap: 20px;
  margin-top: 20px;
  ```
- **响应式**:
  - ≤1200px: columns: 3
  - ≤768px: columns: 2  
  - ≤480px: columns: 1

#### 7.4 案例卡片
- **属性**: break-inside: avoid
- **边距**: margin-bottom: 20px
- **背景**: white
- **圆角**: 12px
- **阴影**: 0 2px 12px rgba(0,0,0,0.08)
- **悬浮**: transform: translateY(-3px)
- **过渡**: transition: transform 0.3s ease

#### 7.5 案例图片
- **宽度**: 100%
- **高度**: auto
- **显示**: block
- **懒加载**: loading="lazy"

#### 7.6 案例信息
- **内边距**: 15px
- **标题**: 
  - 字体: 14px, 600字重
  - 颜色: #333
  - 行高: 1.4
  - 边距: margin-bottom: 8px
  - 溢出: overflow: hidden, text-overflow: ellipsis, white-space: nowrap
- **统计信息**: 
  - 布局: flex, gap: 15px
  - 字体: 12px, color: #999
  - 图标: ❤ (点赞), 👁 (浏览)

### 阶段8：弹窗组件实现 (45分钟)

#### 8.1 项目弹窗组件
- **触发**: 点击"查看全部项目"按钮
- **背景遮罩**: position: fixed, 全屏覆盖, background: rgba(0,0,0,0.5)
- **弹窗容器**: 
  - 最大宽度: 800px, 居中显示
  - 背景: white, 圆角: 12px
  - 阴影: 0 8px 32px rgba(0,0,0,0.15)
  - 内边距: 24px

#### 8.2 弹窗头部
- **标题**: "全部项目", 字体: 20px, 字重: 600
- **关闭按钮**: 右上角 "×", 尺寸: 24×24px
- **悬浮**: 背景变暗

#### 8.3 弹窗内容
- **项目网格**: 3列布局, gap: 20px
- **项目数量**: 6个项目
- **项目卡片**: 与主页项目卡片样式一致
- **项目列表**:
  1. AI界面设计 (2025-09-05)
  2. 时尚摄影项目 (2025-09-04)
  3. 现代建筑方案 (2025-09-03)
  4. 美食摄影 (2025-09-02)
  5. 自然风景 (2025-09-01)
  6. 品牌设计 (2025-08-31)

#### 8.4 交互功能
- **ESC键关闭**: 监听keydown事件
- **点击遮罩关闭**: 点击弹窗外部区域
- **关闭按钮**: 点击×按钮关闭
- **动画效果**: 淡入淡出 0.3s ease

### 阶段9：浮动搜索栏 (45分钟)

#### 9.1 显示条件和位置
- **触发逻辑**: 当主搜索框不在视口内时自动显示
- **位置**: position: fixed, bottom: 20px（底部固定！）
- **居中**: left: 50%, transform: translateX(-50%)
- **层级**: z-index: 1000
- **宽度**: max-width: 600px, width: calc(100% - 40px)

#### 9.2 容器样式设计
- **背景**: white
- **圆角**: 25px
- **边框**: 2px solid #e1e5e9
- **阴影**: 0 8px 32px rgba(0,0,0,0.1)
- **初始状态**: opacity: 0, visibility: hidden
- **显示状态**: opacity: 1, visibility: visible
- **过渡动画**: all 0.3s ease

#### 9.3 按钮布局设计
**添加文件按钮（左侧）**:
- **位置**: 搜索容器左侧
- **尺寸**: 40×40px圆形
- **背景**: #f8f9fa (默认), #ff6b35 (悬浮)
- **图标**: 文档图标 20×20px
- **对齐**: 
  - 无内容时: align-self: stretch, 垂直居中
  - 有文件时: align-self: flex-start, margin-top: 0

**提交按钮（右侧）**:
- **位置**: 搜索容器右侧
- **尺寸**: 40×40px圆形
- **旋转**: transform: rotate(-90deg)
- **状态**: 根据输入内容启用/禁用
- **对齐**:
  - 无内容时: align-self: stretch, 垂直居中
  - 有内容时: align-self: flex-end

#### 9.4 水平对齐规范
**无内容状态**:
- 输入框、添加文件按钮、提交按钮完全水平对齐
- 所有元素使用 align-items: center
- 按钮使用 align-self: stretch 保持高度一致

**有文件内容状态**:
- 添加文件按钮位于左上角 (align-self: flex-start)
- 提交按钮位于右下角 (align-self: flex-end)
- 输入框区域自适应高度

#### 9.5 响应式适配
**≤768px移动端**:
- 容器变为垂直布局: flex-direction: column
- 圆角调整为: 20px
- 内边距: 12px
- 按钮排序: 输入框在上，按钮在下并居中对齐

#### 9.6 交互同步机制
- **双向同步**: 与主搜索框完全同步输入内容和文件
- **文件共享**: 使用相同的fileList状态
- **搜索状态**: 使用相同的searchText状态
- **提交功能**: 调用相同的handleSubmit函数

#### 9.7 动画效果
```css
/* 淡入淡出动画 */
.floating-search {
  transition: all 0.3s ease;
}

.floating-search.show {
  opacity: 1;
  visibility: visible;
}
```

### 阶段10：交互功能实现 (1小时)

#### 10.1 状态管理
```typescript
// 基础状态
const [searchText, setSearchText] = useState('');
const [fileList, setFileList] = useState<File[]>([]);
const [activeCategory, setActiveCategory] = useState('全部');
const [showFloatingSearch, setShowFloatingSearch] = useState(false);
const [galleryColumns, setGalleryColumns] = useState(4);

// 下拉菜单状态
const [creditsDropdownVisible, setCreditsDropdownVisible] = useState(false);
const [userDropdownVisible, setUserDropdownVisible] = useState(false);
const [languageDropdownVisible, setLanguageDropdownVisible] = useState(false);
```

#### 10.2 事件监听器
- **窗口调整**: 监听resize，更新瀑布流列数
- **滚动监听**: 监听scroll，控制浮动搜索栏显示
- **点击外部**: 监听click，关闭下拉菜单
- **键盘事件**: 监听keypress，处理Enter提交

#### 10.3 功能函数
- **文件上传**: handleFileUpload (最多4个文件)
- **文件删除**: handleRemoveFile
- **搜索提交**: handleSubmit (验证非空)
- **分类筛选**: setActiveCategory
- **textarea自动调整**: 动态调整高度

### 阶段11：响应式优化 (30分钟)

#### 11.1 断点设置
- **桌面**: >1200px
- **平板**: 768px-1200px  
- **小平板**: 480px-768px
- **手机**: <480px

#### 11.2 布局调整
- **≤768px**: 
  - 主内容padding: 20px
  - 标题字体: 24px
  - 项目卡片最小宽度: 180px

- **≤480px**:
  - 侧边栏变为顶部横向
  - 项目卡片最小宽度: 160px
  - 瀑布流变为单列

### 阶段12：性能优化 (15分钟)

#### 12.1 图片优化
- **懒加载**: loading="lazy"
- **对象拟合**: object-fit: cover

#### 12.2 事件优化
- **滚动事件**: passive: true
- **防抖处理**: resize事件防抖

#### 12.3 渲染优化
- **条件渲染**: 浮动搜索栏
- **列表渲染**: React key优化

### 阶段13：测试验证 (30分钟)

#### 13.1 功能测试
- [ ] 文件上传/删除功能
- [ ] 搜索框自动调整高度
- [ ] 键盘事件响应
- [ ] 下拉菜单交互
- [ ] 分类筛选功能
- [ ] 响应式布局

#### 13.2 样式测试
- [ ] 各元素尺寸精确匹配
- [ ] 颜色值完全一致
- [ ] 悬浮效果正确
- [ ] 动画过渡流畅
- [ ] 瀑布流布局正确

#### 13.3 兼容性测试
- [ ] 不同屏幕尺寸测试
- [ ] 不同浏览器测试
- [ ] 触摸设备测试

## 精确数值参考表

### 颜色值
| 用途 | 颜色值 |
|------|--------|
| 主橙色 | #ff6b35 |
| 深灰背景 | #1a1a1a |
| 浅灰背景 | #f8f9fa |
| 主文字 | #333 |
| 次要文字 | #666 |
| 辅助文字 | #999 |
| 主边框 | #e1e5e9 |
| 按钮默认 | #f8f9fa |
| 升级按钮 | #374151 |
| 用户头像 | #8B5CF6 |

### 尺寸规范
| 元素 | 尺寸 |
|------|------|
| 侧边栏宽度 | 60px |
| 导航栏高度 | 60px |
| 主内容padding | 40px |
| 搜索框最大宽度 | 600px |
| 搜索框最小高度 | 56px |
| 项目卡片尺寸 | 200×200px |
| 侧边栏图标 | 24×24px |
| 导航图标 | 18×18px |
| 搜索按钮 | 40×40px |

### 字体规范
| 用途 | 字体大小 | 字重 |
|------|----------|------|
| Logo | 20px | bold |
| 主标题 | 32px | 600 |
| 区域标题 | 18px | normal |
| 导航菜单 | 14px | normal |
| 搜索框 | 16px | normal |
| 卡片标题 | 14px | 600 |
| 卡片描述 | 12px | normal |
| 统计信息 | 12px | normal |

## 实施时间估算
- **总计**: 约7小时30分钟
- **阶段1-3**: 2小时15分钟 (基础架构+侧边栏+导航栏)
- **阶段4-6**: 2小时15分钟 (布局+搜索+项目区域)  
- **阶段7-8**: 1小时45分钟 (案例展示+弹窗组件)
- **阶段9-11**: 2小时15分钟 (浮动栏+交互功能+响应式)
- **阶段12-13**: 45分钟 (性能优化+测试验证)

## 质量检查清单
- [ ] 视觉效果100%匹配原型
- [ ] 所有交互功能正常工作
- [ ] 顶部导航栏下拉菜单完整实现
- [ ] 升级/积分按钮下拉菜单内容正确
- [ ] 用户头像下拉菜单功能完整
- [ ] "查看全部项目"弹窗正确显示
- [ ] 弹窗关闭功能正常(ESC键、点击遮罩、关闭按钮)
- [ ] 浮动搜索栏位置正确(底部20px)
- [ ] 浮动搜索栏按钮对齐正确(左上角文件，右下角提交)
- [ ] 无内容时搜索栏水平对齐完美
- [ ] 浮动搜索栏与主搜索框双向同步
- [ ] 浮动搜索栏显示/隐藏逻辑正确
- [ ] 响应式布局完美适配
- [ ] 性能优化到位
- [ ] 代码质量符合标准
- [ ] 类型安全完整
- [ ] 无控制台错误或警告

## 完成标准
最终实现必须在视觉上与原型文件完全一致，包括但不限于：
- 像素级的尺寸匹配
- 精确的颜色值
- 流畅的动画效果  
- 完整的交互行为
- 完美的响应式适配