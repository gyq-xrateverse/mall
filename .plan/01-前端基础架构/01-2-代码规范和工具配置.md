# 01-2: ä»£ç è§„èŒƒå’Œå·¥å…·é…ç½®

## ä»»åŠ¡æ¦‚è¿°
**æ—¶é—´**: ç¬¬2å¤©  
**ç›®æ ‡**: é…ç½®ESLintã€Prettierã€Huskyç­‰å¼€å‘å·¥å…·ï¼Œå»ºç«‹ä»£ç è§„èŒƒ  
**ä¼˜å…ˆçº§**: æœ€é«˜  
**ä¾èµ–**: 01-1 é¡¹ç›®åˆå§‹åŒ–å®Œæˆ

## è¯¦ç»†ä»»åŠ¡æ¸…å•

### 2.1 ESLinté…ç½®
**å®‰è£…ESLintç›¸å…³ä¾èµ–**:
```bash
npm install --save-dev eslint @eslint/js @types/eslint__js typescript-eslint eslint-plugin-react eslint-plugin-react-hooks eslint-plugin-react-refresh
```

**åˆ›å»º `.eslintrc.cjs`**:
```javascript
module.exports = {
  root: true,
  env: { browser: true, es2020: true },
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
  ],
  ignorePatterns: ['dist', '.eslintrc.cjs'],
  parser: '@typescript-eslint/parser',
  plugins: ['react-refresh'],
  rules: {
    'react-refresh/only-export-components': [
      'warn',
      { allowConstantExport: true },
    ],
    '@typescript-eslint/no-unused-vars': 'error',
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',
    'no-console': 'warn',
    'no-debugger': 'error',
  },
}
```

**éªŒæ”¶æ ‡å‡†**:
- [x] ESLintèƒ½æ­£ç¡®æ£€æŸ¥TypeScriptå’ŒReactä»£ç 
- [x] ç¼–è¾‘å™¨å®æ—¶æ˜¾ç¤ºESLinté”™è¯¯
- [x] å‘½ä»¤è¡Œ `npm run lint` æ­£å¸¸å·¥ä½œ

### 2.2 Prettieré…ç½®
**å®‰è£…Prettier**:
```bash
npm install --save-dev prettier eslint-config-prettier eslint-plugin-prettier
```

**åˆ›å»º `.prettierrc`**:
```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "lf"
}
```

**åˆ›å»º `.prettierignore`**:
```
dist/
node_modules/
*.md
*.json
```

**æ›´æ–°ESLinté…ç½®é›†æˆPrettier**:
```javascript
// åœ¨extendsæ•°ç»„æœ«å°¾æ·»åŠ 
'plugin:prettier/recommended'
```

**éªŒæ”¶æ ‡å‡†**:
- [x] Prettierè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
- [x] ESLintå’ŒPrettierè§„åˆ™ä¸å†²çª
- [x] ç¼–è¾‘å™¨ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–

### 2.3 Huskyå’Œlint-stagedé…ç½®
**å®‰è£…ä¾èµ–**:
```bash
npm install --save-dev husky lint-staged
npx husky install
```

**é…ç½®package.json scripts**:
```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "lint:fix": "eslint . --ext ts,tsx --fix",
    "format": "prettier --write .",
    "preview": "vite preview",
    "prepare": "husky install"
  },
  "lint-staged": {
    "*.{ts,tsx}": [
      "eslint --fix",
      "prettier --write"
    ],
    "*.{js,jsx,json,css,scss,md}": [
      "prettier --write"
    ]
  }
}
```

**åˆ›å»ºGit hooks**:
```bash
npx husky add .husky/pre-commit "npx lint-staged"
npx husky add .husky/commit-msg "npx commitlint --edit \$1"
```

**éªŒæ”¶æ ‡å‡†**:
- [x] Gitæäº¤å‰è‡ªåŠ¨è¿è¡Œä»£ç æ£€æŸ¥
- [x] ä»£ç æ ¼å¼é—®é¢˜è‡ªåŠ¨ä¿®å¤
- [x] ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç æ— æ³•æäº¤

### 2.4 Commitizenå’ŒCommitlinté…ç½®
**å®‰è£…ä¾èµ–**:
```bash
npm install --save-dev @commitlint/config-conventional @commitlint/cli commitizen cz-conventional-changelog
```

**åˆ›å»º `commitlint.config.js`**:
```javascript
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat',     // æ–°åŠŸèƒ½
        'fix',      // ä¿®å¤bug
        'docs',     // æ–‡æ¡£æ›´æ–°
        'style',    // ä»£ç æ ¼å¼ä¿®æ”¹
        'refactor', // é‡æ„
        'perf',     // æ€§èƒ½ä¼˜åŒ–
        'test',     // æµ‹è¯•ç›¸å…³
        'chore',    // æ„å»ºè¿‡ç¨‹æˆ–å·¥å…·å˜åŠ¨
        'revert',   // æ’¤é”€æäº¤
      ],
    ],
  },
}
```

**æ›´æ–°package.json**:
```json
{
  "config": {
    "commitizen": {
      "path": "./node_modules/cz-conventional-changelog"
    }
  },
  "scripts": {
    "commit": "cz"
  }
}
```

**éªŒæ”¶æ ‡å‡†**:
- [x] ä½¿ç”¨ `npm run commit` è¿›è¡Œè§„èŒƒåŒ–æäº¤
- [x] ä¸è§„èŒƒçš„æäº¤ä¿¡æ¯è¢«æ‹’ç»
- [x] æäº¤ä¿¡æ¯æ ¼å¼ç»Ÿä¸€

### 2.5 EditorConfigé…ç½®
**åˆ›å»º `.editorconfig`**:
```
root = true

[*]
charset = utf-8
end_of_line = lf
indent_style = space
indent_size = 2
insert_final_newline = true
trim_trailing_whitespace = true

[*.md]
trim_trailing_whitespace = false
```

**éªŒæ”¶æ ‡å‡†**:
- [x] ä¸åŒç¼–è¾‘å™¨ä½¿ç”¨ç»Ÿä¸€çš„ç¼–ç é£æ ¼
- [x] ç¼©è¿›ã€æ¢è¡Œç¬¦ç­‰è®¾ç½®ä¸€è‡´

## é¡¹ç›®ç»“æ„è§„èŒƒ
```
src/
â”œâ”€â”€ api/           # APIæ¥å£ç›¸å…³
â”œâ”€â”€ assets/        # é™æ€èµ„æº
â”œâ”€â”€ components/    # é€šç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/        # åŸºç¡€UIç»„ä»¶
â”‚   â””â”€â”€ common/    # ä¸šåŠ¡é€šç”¨ç»„ä»¶
â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”œâ”€â”€ store/         # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ styles/        # å…¨å±€æ ·å¼
â”œâ”€â”€ types/         # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”œâ”€â”€ App.tsx
â””â”€â”€ main.tsx
```

## äº¤ä»˜ç‰©
- [x] å®Œæ•´çš„ESLinté…ç½®
- [x] Prettierä»£ç æ ¼å¼åŒ–é…ç½®
- [x] Git hookså’Œæäº¤è§„èŒƒ
- [x] ç»Ÿä¸€çš„ç¼–è¾‘å™¨é…ç½®
- [x] è§„èŒƒçš„é¡¹ç›®ç›®å½•ç»“æ„

## éªŒè¯æµ‹è¯•
1. åˆ›å»ºä¸€ä¸ªä¸ç¬¦åˆè§„èŒƒçš„æ–‡ä»¶ï¼Œè¿è¡Œlintæ£€æŸ¥
2. å°è¯•æäº¤ä¸è§„èŒƒçš„ä»£ç ï¼ŒéªŒè¯æ˜¯å¦è¢«é˜»æ­¢
3. ä½¿ç”¨ `npm run commit` è¿›è¡Œä¸€æ¬¡è§„èŒƒæäº¤
4. éªŒè¯ç¼–è¾‘å™¨è‡ªåŠ¨æ ¼å¼åŒ–åŠŸèƒ½

## é£é™©æ§åˆ¶
- **å·¥å…·ç‰ˆæœ¬å…¼å®¹æ€§**: ä½¿ç”¨ç¨³å®šç‰ˆæœ¬çš„å¼€å‘å·¥å…·
- **å›¢é˜Ÿåä½œ**: ç¡®ä¿æ‰€æœ‰å¼€å‘è€…ä½¿ç”¨ç›¸åŒçš„é…ç½®
- **æ€§èƒ½å½±å“**: é¿å…è¿‡äºä¸¥æ ¼çš„è§„åˆ™å½±å“å¼€å‘æ•ˆç‡

## éªŒæ”¶è®°å½•
**å®Œæˆæ—¶é—´**: 2025-01-09 10:45  
**éªŒæ”¶çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡  
**éªŒæ”¶äºº**: Claude Code  

### è¯¦ç»†éªŒæ”¶è®°å½•
1. **2.1 ESLinté…ç½®**: âœ… é€šè¿‡ - ESLintå®‰è£…é…ç½®å®Œæˆï¼Œæ”¯æŒTypeScriptå’ŒReactæ£€æŸ¥ï¼Œå‘½ä»¤è¡Œå·¥å…·æ­£å¸¸
2. **2.2 Prettieré…ç½®**: âœ… é€šè¿‡ - Prettierå®‰è£…é…ç½®å®Œæˆï¼Œä¸ESLinté›†æˆæ— å†²çªï¼Œè‡ªåŠ¨æ ¼å¼åŒ–æ­£å¸¸
3. **2.3 Huskyå’Œlint-stagedé…ç½®**: âœ… é€šè¿‡ - Git hooksé…ç½®å®Œæˆï¼Œpre-commitæ£€æŸ¥æ­£å¸¸ï¼Œä¸è§„èŒƒä»£ç æäº¤è¢«é˜»æ­¢
4. **2.4 Commitizenå’ŒCommitlinté…ç½®**: âœ… é€šè¿‡ - æäº¤ä¿¡æ¯è§„èŒƒé…ç½®å®Œæˆï¼Œcommitlint.config.cjsæ ¼å¼ä¿®å¤ï¼Œè§„èŒƒæäº¤æˆåŠŸ
5. **2.5 EditorConfigé…ç½®**: âœ… é€šè¿‡ - ç¼–è¾‘å™¨é…ç½®æ–‡ä»¶åˆ›å»ºå®Œæˆï¼Œç»Ÿä¸€ç¼–ç é£æ ¼è®¾ç½®

### æµ‹è¯•ç»“æœ
- âœ… `npm run lint` - ESLintæ£€æŸ¥æ­£å¸¸è¿è¡Œ
- âœ… `npm run format` - Prettieræ ¼å¼åŒ–æˆåŠŸ
- âœ… Gitæäº¤æµ‹è¯• - ä¸è§„èŒƒä»£ç è¢«æˆåŠŸé˜»æ­¢
- âœ… è§„èŒƒæäº¤æµ‹è¯• - æ ‡å‡†commitæ¶ˆæ¯æäº¤æˆåŠŸ
- âœ… `npm run build` - æ„å»ºæˆåŠŸæ— é”™è¯¯

### é—®é¢˜è§£å†³è®°å½•
- ğŸ”§ ä¿®å¤commitlint.config.js â†’ commitlint.config.cjs (ESæ¨¡å—å…¼å®¹æ€§é—®é¢˜)
- ğŸ”§ å®‰è£…@types/nodeè§£å†³TypeScriptæ„å»ºé”™è¯¯
- ğŸ”§ é…ç½®Gitä»“åº“åˆå§‹åŒ–

## ä¸‹ä¸€æ­¥
å®Œæˆåè¿›å…¥ `01-3-è·¯ç”±ç³»ç»Ÿæ­å»º` âœ… **å‡†å¤‡å¼€å§‹**