# 01-1-2: 环境变量配置

## 任务概述
**时间**: 第1天上午 (30分钟)  
**目标**: 配置开发和生产环境的环境变量  
**优先级**: 高  
**依赖**: 01-1-1-创建Vite项目完成

## 详细任务清单

### 执行步骤

#### 1. 创建开发环境配置文件
创建 `.env.development` 文件：
```env
# API配置
VITE_API_BASE_URL=http://localhost:8080/api
VITE_FILE_UPLOAD_URL=http://localhost:8080/api/upload
VITE_WEBSOCKET_URL=ws://localhost:8080/ws

# 应用配置
VITE_APP_TITLE=BEILV AI Development
VITE_APP_ENV=development

# 功能开关
VITE_ENABLE_MOCK=true
VITE_ENABLE_DEBUG=true
```

#### 2. 创建生产环境配置文件
创建 `.env.production` 文件：
```env
# API配置
VITE_API_BASE_URL=https://api.beilv.com/api
VITE_FILE_UPLOAD_URL=https://api.beilv.com/api/upload
VITE_WEBSOCKET_URL=wss://api.beilv.com/ws

# 应用配置
VITE_APP_TITLE=BEILV AI
VITE_APP_ENV=production

# 功能开关
VITE_ENABLE_MOCK=false
VITE_ENABLE_DEBUG=false
```

#### 3. 创建环境变量类型定义
创建 `src/types/env.d.ts` 文件：
```typescript
/// <reference types="vite/client" />

interface ImportMetaEnv {
  // API配置
  readonly VITE_API_BASE_URL: string
  readonly VITE_FILE_UPLOAD_URL: string
  readonly VITE_WEBSOCKET_URL: string
  
  // 应用配置
  readonly VITE_APP_TITLE: string
  readonly VITE_APP_ENV: 'development' | 'production'
  
  // 功能开关
  readonly VITE_ENABLE_MOCK: string
  readonly VITE_ENABLE_DEBUG: string
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

#### 4. 创建环境变量工具类
创建 `src/utils/env.ts` 文件：
```typescript
/**
 * 环境变量工具类
 */
class EnvUtils {
  /**
   * 获取API基础URL
   */
  static getApiBaseUrl(): string {
    return import.meta.env.VITE_API_BASE_URL || 'http://localhost:8080/api';
  }
  
  /**
   * 获取文件上传URL
   */
  static getFileUploadUrl(): string {
    return import.meta.env.VITE_FILE_UPLOAD_URL || 'http://localhost:8080/api/upload';
  }
  
  /**
   * 获取WebSocket URL
   */
  static getWebSocketUrl(): string {
    return import.meta.env.VITE_WEBSOCKET_URL || 'ws://localhost:8080/ws';
  }
  
  /**
   * 获取应用标题
   */
  static getAppTitle(): string {
    return import.meta.env.VITE_APP_TITLE || 'BEILV AI';
  }
  
  /**
   * 是否为开发环境
   */
  static isDevelopment(): boolean {
    return import.meta.env.VITE_APP_ENV === 'development';
  }
  
  /**
   * 是否为生产环境
   */
  static isProduction(): boolean {
    return import.meta.env.VITE_APP_ENV === 'production';
  }
  
  /**
   * 是否启用Mock数据
   */
  static isMockEnabled(): boolean {
    return import.meta.env.VITE_ENABLE_MOCK === 'true';
  }
  
  /**
   * 是否启用调试模式
   */
  static isDebugEnabled(): boolean {
    return import.meta.env.VITE_ENABLE_DEBUG === 'true';
  }
}

export default EnvUtils;
```

#### 5. 更新.gitignore文件
确保敏感环境变量文件不被提交：
```gitignore
# 环境变量
.env.local
.env.*.local

# 但保留开发和生产配置模板
!.env.development
!.env.production
```

## 验收标准
- [x] 开发环境配置文件正确创建
- [x] 生产环境配置文件正确创建
- [x] TypeScript类型定义完整
- [x] 环境变量工具类功能完善
- [x] 环境变量在应用中能正确读取
- [x] 不同环境下配置值正确切换

## 交付物
- [x] `.env.development` - 开发环境配置
- [x] `.env.production` - 生产环境配置
- [x] `src/types/env.d.ts` - 类型定义
- [x] `src/utils/env.ts` - 工具类
- [x] 更新的.gitignore规则

## 技术要点
- **命名规范**: 所有环境变量必须以VITE_开头才能被Vite识别
- **类型安全**: 通过TypeScript类型定义确保类型安全
- **工具类**: 统一的环境变量访问接口，便于维护
- **安全性**: 不提交敏感的本地环境变量

## 测试方法
```typescript
// 在组件中测试环境变量
import EnvUtils from '@/utils/env';

console.log('API URL:', EnvUtils.getApiBaseUrl());
console.log('App Title:', EnvUtils.getAppTitle());
console.log('Is Dev:', EnvUtils.isDevelopment());
```

## 下一步
完成后进入 `01-1-3-Vite配置优化`