# 02-3-1: 登录页面组件

## 任务概述
**时间估算**: 2小时  
**优先级**: 高  
**依赖关系**: 02-2-2 第三方登录控制器完成  
**负责模块**: 前端React应用

## 详细任务清单

### 1. 创建登录页面组件结构
- [ ] 创建pages/auth/Login.tsx登录页面组件
- [ ] 设计响应式布局结构
- [ ] 配置页面路由和导航
- [ ] 添加页面标题和SEO配置

### 2. 实现邮箱验证码登录表单
- [ ] 创建邮箱输入字段（带验证）
- [ ] 创建验证码输入字段
- [ ] 实现发送验证码按钮（带倒计时）
- [ ] 添加表单验证规则
- [ ] 实现表单提交逻辑

### 3. 集成第三方登录按钮
- [ ] 创建微信扫码登录按钮
- [ ] 创建Google OAuth登录按钮
- [ ] 设计第三方登录区域布局
- [ ] 添加登录方式分隔线

### 4. 实现登录状态管理
- [ ] 使用useLogin Hook管理登录逻辑
- [ ] 处理登录Loading状态
- [ ] 显示登录错误信息
- [ ] 登录成功后跳转处理

### 5. 设计页面样式和交互
- [ ] 使用Tailwind CSS设计现代UI
- [ ] 实现暗色模式支持
- [ ] 添加表单动画效果
- [ ] 实现响应式设计（移动端适配）

### 6. 添加表单验证和错误处理
- [ ] 实现实时表单验证
- [ ] 显示字段验证错误信息
- [ ] 处理API错误响应
- [ ] 添加用户友好的提示信息

### 7. 实现验证码发送功能
- [ ] 验证码发送按钮状态管理
- [ ] 60秒倒计时显示
- [ ] 发送频率限制处理
- [ ] 发送成功/失败提示

### 8. 添加页面导航和链接
- [ ] 添加"没有账号？立即注册"链接
- [ ] 添加"忘记密码"链接（预留）
- [ ] 实现页面间平滑切换

## 验收标准
- [x] 登录页面UI美观且响应式
- [x] 邮箱验证码登录功能正常
- [x] 第三方登录按钮正确集成
- [x] 表单验证规则完整有效
- [x] 错误处理友好用户体验好
- [x] 移动端适配良好
- [x] 支持暗色模式切换

## 交付物
1. **登录页面组件**（Login.tsx）
2. **登录表单组件**（LoginForm.tsx）
3. **第三方登录组件**（SocialLogin.tsx）
4. **页面样式文件**（login.css或使用Tailwind）
5. **类型定义文件**（login.types.ts）

## 技术要点

### 组件结构
```typescript
const Login: React.FC = () => {
  const [email, setEmail] = useState('');
  const [code, setCode] = useState('');
  const [countdown, setCountdown] = useState(0);
  
  const { login, loading, error } = useLogin();
  
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="max-w-md w-full space-y-8">
        {/* 登录表单 */}
        {/* 第三方登录 */}
      </div>
    </div>
  );
};
```

### 表单验证规则
- 邮箱格式验证
- 验证码长度验证（6位数字）
- 必填字段验证
- 实时验证反馈

### 验证码发送逻辑
```typescript
const sendVerificationCode = async () => {
  if (!email || !validateEmail(email)) {
    setError('请输入有效的邮箱地址');
    return;
  }
  
  try {
    await authApi.sendVerificationCode({
      email,
      codeType: 'login'
    });
    setCountdown(60);
    startCountdown();
  } catch (error) {
    setError('验证码发送失败，请稍后重试');
  }
};
```

### UI设计要点
- 现代化卡片布局
- 清晰的视觉层次
- 友好的交互反馈
- 一致的品牌色彩
- 无障碍访问支持

### 第三方登录集成
```typescript
const SocialLogin: React.FC = () => {
  return (
    <div className="mt-6">
      <div className="relative">
        <div className="absolute inset-0 flex items-center">
          <div className="w-full border-t border-gray-300" />
        </div>
        <div className="relative flex justify-center text-sm">
          <span className="px-2 bg-white text-gray-500">或使用以下方式登录</span>
        </div>
      </div>
      
      <div className="mt-6 grid grid-cols-2 gap-3">
        <WeChatLoginButton />
        <GoogleLoginButton />
      </div>
    </div>
  );
};
```

### 响应式设计
- 移动端优先设计
- 平板和桌面端适配
- 触摸友好的按钮大小
- 合适的间距和字体大小

## 状态管理
- 表单输入状态
- 验证码倒计时状态
- 登录Loading状态
- 错误信息状态
- 第三方登录状态

## 用户体验优化
- 自动聚焦第一个输入框
- 回车键提交表单
- 验证码输入优化（自动格式化）
- 登录成功动画效果
- 错误信息自动消失

## 安全考虑
- 验证码输入脱敏
- 防止表单重复提交
- 客户端输入验证
- HTTPS传输确保

## 测试用例
- 表单验证测试
- 验证码发送测试
- 登录流程测试
- 第三方登录测试
- 响应式布局测试
- 错误处理测试

## 下一步
完成后进入 `02-3-2-注册页面组件`